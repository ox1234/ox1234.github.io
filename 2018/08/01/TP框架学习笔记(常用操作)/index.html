<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="flight"><link rel="alternative" href="/atom.xml" title="技术改变世界，文化改变人心" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>TP框架学习笔记(常用操作) - 技术改变世界，文化改变人心</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">技术改变世界，文化改变人心</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-08-01T06:16:53.055Z">August 1, 2018</time><h1 class="post__title"><a href="/2018/08/01/TP框架学习笔记(常用操作)/">TP框架学习笔记(常用操作)</a></h1><div class="post__main echo"><h2 id="session操作"><a href="#session操作" class="headerlink" title="session操作"></a>session操作</h2><p>写入：<code>session(&#39;key&#39;,&#39;value&#39;)</code></p>
<p>读取：<code>session(&#39;key&#39;)</code></p>
<p>删除：<code>session(&#39;key&#39;,null)</code></p>
<h2 id="cookie操作"><a href="#cookie操作" class="headerlink" title="cookie操作"></a>cookie操作</h2><p>普通写入：<code>cookie(&#39;name&#39;,&#39;value&#39;)</code></p>
<p>设定时间写入：<code>cookie(&#39;name&#39;,&#39;value&#39;,7*24*3600)</code></p>
<p>读取：<code>cookie(&#39;name&#39;)</code></p>
<p>读取所有cookie：<code>cookie()</code></p>
<p>cookie删除：<code>cookie(&#39;name&#39;,null)</code></p>
<h2 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h2><p>分页操作：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$model = M(<span class="string">'News'</span>); <span class="comment">//实例化News对象</span></span><br><span class="line">$count = $model -&gt; count(); <span class="comment">//查询满足条件的总记录数</span></span><br><span class="line">$Page = <span class="keyword">new</span> \Think\Page($count,<span class="number">30</span>); <span class="comment">//实例化分页类，大小为30</span></span><br><span class="line">$show = $Page.show(); <span class="comment">//分页显示输出</span></span><br><span class="line">$list = $model-&gt;where(<span class="string">'status=1'</span>)-&gt;order(<span class="string">'create_time'</span>)-&gt;limit($Page-&gt;firstRow.<span class="string">','</span>.$Page-&gt;listRows)-&gt;select()</span><br><span class="line"><span class="keyword">$this</span>-&gt;assign(<span class="string">'list'</span>,$list);</span><br><span class="line"><span class="keyword">$this</span>-&gt;display();</span><br></pre></td></tr></table></figure>
<h2 id="验证码"><a href="#验证码" class="headerlink" title="验证码"></a>验证码</h2><p>用法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$verify = <span class="keyword">new</span> Verify();</span><br><span class="line">$verify-&gt;entry();</span><br></pre></td></tr></table></figure>
<p>使用验证码有以下三步：</p>
<ol>
<li>调用Vertify类的entry方法输出验证码图片</li>
<li>将img的src属性设置为第一步中的URL</li>
<li>接收表单提交的验证码，并调用Verify的check方法进行验证</li>
</ol>
<h2 id="图像处理"><a href="#图像处理" class="headerlink" title="图像处理"></a>图像处理</h2><p>实例化Image</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$path = <span class="string">'./Public/images/timg.jpeg'</span>;</span><br><span class="line">$image = <span class="keyword">new</span> Image(Image::IMAGE_GD,$path);</span><br></pre></td></tr></table></figure>
<p>图像裁剪：<code>crop()</code></p>
<p>图像缩略图：<code>thum()</code></p>
<p>水印：<code>water()</code></p>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/漏洞分析/">漏洞分析</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/tp/">tp</a></li></ul></footer></article><div class="comments" id="lv-container" data-id="city" data-uid="your uid"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2016-2018 flight</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>